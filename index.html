<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NishuAbhyasi</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;800&family=Marck+Script&display=swap" rel="stylesheet">
    <style>
        :root {
            --color-primary: #1a2a6c;
            --color-secondary: #2575fc;
            --color-accent: #f2994a;
            --btn-grad: linear-gradient(135deg, #ff9800, #ff5722);
            --glass: rgba(255, 255, 255, 0.12);
            --glass-border: rgba(255, 255, 255, 0.25);
            --neon-blue: #00f2ff;
        }
        * { box-sizing: border-box; margin: 0; padding: 0; font-family: 'Poppins', sans-serif; }
        body {
            min-height: 100vh;
            background: linear-gradient(-45deg, var(--color-primary), var(--color-secondary), var(--color-primary), var(--color-accent));
            background-size: 300% 300%;
            animation: dynamicFlow 18s ease-in-out infinite;
            display: flex; flex-direction: column; align-items: center; overflow-x: hidden;
        }
        @keyframes dynamicFlow { 0% { background-position: 0% 50%; } 50% { background-position: 100% 50%; } 100% { background-position: 0% 50%; } }
        .bubbles-container { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: 0; pointer-events: none; }
        .bubble { position: absolute; bottom: -120px; background: rgba(255, 255, 255, 0.2); border-radius: 50%; animation: riseEffect 15s infinite ease-in; }
        @keyframes riseEffect { 0% { transform: translateY(0) scale(1); opacity: 0; } 100% { transform: translateY(-1300px) scale(2); opacity: 0; } }
        
        #pageOverlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.6); backdrop-filter: blur(8px); display: none; z-index: 1500; }
        .time-bar { width: 95%; margin: 15px auto 0; padding: 12px 30px; background: rgba(255, 255, 255, 0.1); backdrop-filter: blur(15px); border: 1px solid var(--glass-border); border-radius: 50px; display: flex; justify-content: space-between; align-items: center; color: white; font-size: 14px; z-index: 10; }

        .wrapper { width: 95%; max-width: 1200px; padding: 20px; z-index: 2; flex-grow: 1; }
        .welcome { background: var(--glass); backdrop-filter: blur(25px); border: 1px solid var(--glass-border); border-radius: 35px; padding: 30px; margin-bottom: 30px; display: flex; align-items: center; justify-content: center; gap: 30px; }
        .welcome-logo { height: 80px; width: auto; }
        .welcome .brand { font-family: 'Marck Script', cursive; font-size: 50px; color: #fff; line-height: 1; }

        .dashboard { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; width: 100%; }
        .card { background: rgba(255, 255, 255, 0.08); backdrop-filter: blur(15px); border: 1px solid rgba(255, 255, 255, 0.3); border-radius: 28px; padding: 25px; display: flex; flex-direction: column; transition: 0.4s; min-height: 220px; opacity: 0; transform: translateY(30px); }
        .card.reveal { opacity: 1; transform: translateY(0); }
        .card:hover { transform: translateY(-5px); background: rgba(255, 255, 255, 0.15); }
        .card h3 { font-size: 22px; color: #fff; margin-bottom: 5px; display: flex; align-items: center; justify-content: space-between; }
        .card p { font-size: 13px; color: rgba(255,255,255,0.7); margin-bottom: 15px; }

        .badge { font-size: 10px; font-weight: 800; padding: 4px 10px; border-radius: 50px; text-transform: uppercase; }
        .badge-new { background: var(--color-accent); color: #fff; animation: blink 1.5s infinite; }
        .badge-done { background: #16a34a; color: #fff; }
        @keyframes blink { 0%, 100% { opacity: 1; } 50% { opacity: 0.6; } }

        .score-box { background: rgba(0,0,0,0.2); border-radius: 15px; padding: 12px; margin-top: auto; border: 1px dashed rgba(255,255,255,0.2); display: none; }
        .score-line { font-size: 11px; color: #4ade80; font-weight: 700; display: block; margin: 2px 0; }
        
        .btn { margin-top: 15px; padding: 12px; border: none; border-radius: 15px; background: var(--btn-grad); color: #fff; font-size: 15px; font-weight: 700; cursor: pointer; text-align: center; text-decoration: none; }

        .popup-modal { position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 90%; max-width: 400px; background: rgba(30, 40, 70, 0.98); backdrop-filter: blur(30px); border: 1px solid rgba(255,255,255,0.3); border-radius: 30px; display: none; flex-direction: column; z-index: 2000; padding: 30px; text-align: center; color: #fff; box-shadow: 0 30px 60px rgba(0,0,0,0.5); }
        
        .admin-pill { margin-top: 30px; display: inline-flex; align-items: center; gap: 8px; padding: 8px 20px; border-radius: 50px; background: rgba(255,255,255,0.05); border: 1px solid var(--glass-border); color: rgba(255,255,255,0.5); font-size: 11px; cursor: pointer; }
        .footer { margin: 20px 0; color: rgba(255,255,255,0.4); font-size: 12px; text-align: center; }

        @media(max-width:600px){ .welcome { flex-direction: column; text-align: center; } .welcome .brand { font-size: 35px; } }
    </style>
</head>
<body>
    <div id="pageOverlay" onclick="closeAllPopups()"></div>
    <div class="bubbles-container" id="bubbles"></div>

    <div class="time-bar">
        <div><span id="live-date"></span> | <span id="live-day"></span></div>
        <div id="live-clock" style="font-family: monospace; font-size: 16px;">00:00:00 AM</div>
    </div>

    <div class="wrapper">
        <div class="welcome">
            <img src="NishuAbhyasi.png" alt="Logo" class="welcome-logo">
            <div class="brand">NishuAbhyasi</div>
        </div>

        <div class="dashboard">
            <div class="card">
                <h3>English <span id="badge-English" class="badge"></span></h3>
                <p>Grammar and vocabulary sets.</p>
                <div id="score-English" class="score-box"></div>
                <a href="tests/English.html" class="btn">Start Test</a>
            </div>
            <div class="card">
                <h3>Reasoning <span id="badge-Reasoning" class="badge"></span></h3>
                <p>Logical Aptitude sets.</p>
                <div id="score-Reasoning" class="score-box"></div>
                <a href="tests/reasoning.html" class="btn">Start Test</a>
            </div>
            <div class="card">
                <h3>Teaching <span id="badge-Teaching" class="badge"></span></h3>
                <p>Pedagogy and methodology.</p>
                <div id="score-Teaching" class="score-box"></div>
                <a href="tests/Teaching_Principles.html" class="btn">Start Test</a>
            </div>
            <div class="card">
                <h3>Hindi <span id="badge-Hindi" class="badge"></span></h3>
                <p>Vyakaran practice sets.</p>
                <div id="score-Hindi" class="score-box"></div>
                <a href="tests/Hindi.html" class="btn">Start Test</a>
            </div>
            <div class="card">
                <h3>Awareness <span id="badge-Awareness" class="badge"></span></h3>
                <p>GK and Current Affairs.</p>
                <div id="score-Awareness" class="score-box"></div>
                <a href="tests/General_Awareness.html" class="btn">Start Test</a>
            </div>
            <div class="card">
                <h3>All-in-One <span id="badge-AllInOne" class="badge"></span></h3>
                <p>Full Mock Mega Test.</p>
                <div id="score-AllInOne" class="score-box"></div>
                <a href="tests/all_in_one.html" class="btn">Start Mega Test</a>
            </div>
        </div>

        <center>
            <div class="admin-pill" onclick="toggleAdminPopup()">ðŸ”’ Admin Terminal</div>
        </center>
        <div class="footer">Â© 2026 NishuAbhyasi | Learning Made Modern</div>
    </div>

    <div id="adminBox" class="popup-modal">
        <h4 style="color:#ff4d4d; margin-bottom:10px;">RESTRICTED</h4>
        <p style="font-size:13px; margin-bottom:20px;">For Admins Only. Candidates please return.</p>
        <a href="admin.html" class="btn" style="text-decoration:none; margin:0 0 10px 0;">Login</a>
        <button onclick="closeAllPopups()" style="background:rgba(255,255,255,0.1); border:none; color:white; padding:10px; border-radius:10px; cursor:pointer;">Cancel</button>
    </div>

    <script>
        const GIST_MAP = {
            "English": "4219b480eb7d7e60c49334fce3aae1a2",
            "Hindi": "f53d76137dec40ded2db81e043c6337d",
            "Teaching": "ecc0225df38396f70445c4dd702ff939",
            "Awareness": "e0372b12ad15ed3c2643059cc1e88cc0",
            "Reasoning": "75ef01c2eb972d2b695938445c08df60",
            "AllInOne": "2fb7cd87290c262fc490896192d21dd2"
        };

        function updateClock() {
            const now = new Date();
            document.getElementById('live-date').innerText = now.toLocaleDateString('en-GB').replace(/\//g, '-');
            document.getElementById('live-day').innerText = now.toLocaleDateString('en-US', { weekday: 'long' });
            document.getElementById('live-clock').innerText = now.toLocaleTimeString('en-US', { hour: '2-digit', minute: '2-digit', second: '2-digit' });
        }

        function toggleAdminPopup() { document.getElementById('adminBox').style.display = 'flex'; document.getElementById('pageOverlay').style.display = 'block'; }
        function closeAllPopups() { document.getElementById('adminBox').style.display = 'none'; document.getElementById('pageOverlay').style.display = 'none'; }

        async function updateDashboard() {
            for (const [sub, gistId] of Object.entries(GIST_MAP)) {
                const badge = document.getElementById(`badge-${sub}`);
                const scoreBox = document.getElementById(`score-${sub}`);
                if (!badge) continue;

                try {
                    const res = await fetch(`https://api.github.com/gists/${gistId}`);
                    const data = await res.json();
                    const gistTime = new Date(data.updated_at);

                    const levels = ['EASY', 'MEDIUM', 'HARD'];
                    let doneCount = 0;
                    let hasNew = false;
                    let html = "";

                    levels.forEach(lvl => {
                        const score = localStorage.getItem(`score_${sub}_${lvl}`);
                        const date = localStorage.getItem(`score_date_${sub}_${lvl}`);
                        if (score) {
                            doneCount++;
                            if (date && new Date(date) < gistTime) hasNew = true;
                            html += `<span class="score-line">${lvl}: ${score}</span>`;
                        }
                    });

                    badge.style.display = "inline-block";
                    if (doneCount > 0) {
                        scoreBox.style.display = "block";
                        scoreBox.innerHTML = html;
                        if (hasNew) {
                            badge.className = "badge badge-new"; badge.innerText = "NEW UPDATE ðŸ”¥";
                        } else {
                            badge.className = "badge badge-done"; badge.innerText = doneCount === 3 ? "COMPLETED âœ…" : `${doneCount}/3 DONE`;
                        }
                    } else {
                        badge.className = "badge badge-new"; badge.innerText = "UPDATED ðŸ”¥";
                    }
                } catch (e) { console.error(e); }
            }
        }

        window.onload = () => {
            updateDashboard(); updateClock(); setInterval(updateClock, 1000);
            const obs = new IntersectionObserver((es) => { es.forEach(e => { if (e.isIntersecting) e.target.classList.add('reveal'); }); });
            document.querySelectorAll('.card').forEach(c => obs.observe(c));
            // Add bubbles
            const bCont = document.getElementById('bubbles');
            for(let i=0; i<5; i++) { const b = document.createElement('div'); b.className='bubble'; b.style.left = Math.random()*100 + '%'; b.style.width = b.style.height = (Math.random()*50 + 20) + 'px'; b.style.animationDelay = (Math.random()*5) + 's'; bCont.appendChild(b); }
        };
    </script>
</body>
</html>
