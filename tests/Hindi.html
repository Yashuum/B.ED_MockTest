<!DOCTYPE html>
<html lang="hi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>NishuAbhyasi – Hindi by Yash</title>

<style>
/* Professional Glassmorphism Theme */
:root{
  --color-primary: #1a2a6c;
  --color-secondary: #2575fc;
  --color-accent: #f2994a;
  --glass: rgba(255, 255, 255, 0.12);
  --glass-border: rgba(255, 255, 255, 0.25);
  --success: #16a34a;
  --danger: #ef4444;
}

*{box-sizing:border-box; margin:0; padding:0; font-family:'Segoe UI', Tahoma, sans-serif;}

body{
  min-height:100vh;
  background: linear-gradient(-45deg, var(--color-primary), var(--color-secondary), var(--color-primary), var(--color-accent));
  background-size: 300% 300%;
  animation: dynamicFlow 18s ease-in-out infinite;
  color: #fff;
  padding: 20px 10px;
}

@keyframes dynamicFlow {
  0% { background-position: 0% 50%; }
  50% { background-position: 100% 50%; }
  100% { background-position: 0% 50%; }
}

@keyframes pulse {
  0% { transform: scale(1); opacity: 1; }
  50% { transform: scale(1.5); opacity: 0.5; }
  100% { transform: scale(1); opacity: 1; }
}

.container{ max-width:900px; margin:auto; position: relative; z-index: 2; }

h1{ text-align:center; margin-bottom:10px; font-weight: 800; text-shadow: 0 4px 10px rgba(0,0,0,0.3); }

/* START SCREEN */
.start-screen{
  background: var(--glass);
  backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  padding: 40px 20px;
  border-radius: 30px;
  text-align:center;
  margin-top: 50px;
}

.start-screen input {
  width: 100%;
  max-width: 300px;
  padding: 15px;
  margin: 10px 0;
  border-radius: 15px;
  border: 1px solid var(--glass-border);
  background: rgba(255, 255, 255, 0.15);
  color: #ffffff !important;
  font-size: 16px;
  outline: none;
}

.start-screen input::placeholder {
  color: rgba(255, 255, 255, 0.8) !important;
}

.q-count-sticker {
  margin: 5px auto 15px;
  width: fit-content;
  background: rgba(255, 255, 255, 0.1);
  padding: 8px 20px;
  border-radius: 50px;
  border: 1px solid var(--glass-border);
  font-size: 14px;
  display: flex;
  align-items: center;
  gap: 10px;
}

.pulse-dot {
  width: 8px;
  height: 8px;
  background: #4facfe;
  border-radius: 50%;
  animation: pulse 1.5s infinite;
}

button{
  padding: 14px 28px;
  border: none;
  border-radius: 15px;
  background: linear-gradient(135deg, #ff9800, #ff5722);
  color: #fff;
  cursor: pointer;
  font-weight: 700;
  transition: 0.3s;
}
button:hover{ transform: scale(1.05); }

.top-bar{
  display:none; justify-content:space-between; align-items:center;
  padding:15px 25px; background: var(--glass);
  backdrop-filter: blur(15px);
  border:1px solid var(--glass-border); border-radius:50px;
  position:sticky; top:10px; z-index:100; margin-bottom:15px;
}
.timer{ font-weight:800; color:#fff; background: var(--danger); padding: 5px 15px; border-radius: 20px; }

#palette{ 
  display:none; flex-wrap:wrap; gap:8px; margin-bottom:20px; 
  justify-content: center; padding: 10px;
}
.palette span{
  width:38px; height:38px; display:flex; align-items:center; justify-content:center;
  border-radius:10px; background: rgba(255,255,255,0.1); 
  border: 1px solid var(--glass-border); cursor:pointer; font-size: 13px;
}
.palette .visited{ background: var(--color-secondary); }
.palette .attempted{ background: var(--success); box-shadow: 0 0 8px var(--success); }

.quiz-card{
  background: var(--glass); border:1px solid var(--glass-border);
  backdrop-filter: blur(20px); border-radius:25px; padding:30px;
}
.options label{
  display:flex; align-items: center; gap:12px; padding:14px; 
  background: rgba(255,255,255,0.05); border:1px solid var(--glass-border);
  border-radius:15px; margin:10px 0; cursor:pointer; transition: 0.2s;
}
.options label:hover{ background: rgba(255,255,255,0.15); transform: translateX(5px); }

.nav{ display:flex; justify-content:space-between; margin-top:20px; }
.btn-secondary { background: rgba(255,255,255,0.15); }

.result{ background: var(--glass); padding: 25px; border-radius: 25px; margin-top:20px; }
.correct{ color: #4ade80; font-weight:bold; }
.wrong{ color: #f87171; font-weight:bold; }

.sol-box {
  margin-top:12px; 
  padding:12px; 
  background:rgba(242, 153, 74, 0.15); 
  border-radius:12px; 
  font-size:14px; 
  color:#ffcc80;
  border: 1px dashed var(--color-accent);
}
</style>

<script src="https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js"></script>
<script>
  (function () {
    emailjs.init("L8kGW-X7JOiYaycH5");
  })();
</script>
</head>

<body>

<div class="container">

<h1>Target Test- Hindi 2026</h1>
<p style="text-align:center; opacity:0.8; font-size:13px; margin-bottom:20px; color:#fff;">Last Updated: 16 Jan, 2026 - 08:53</p>

<div class="start-screen" id="startScreen">
  <input id="candidateName" placeholder="Enter your name">
  <input id="testTime" type="number" placeholder="Time (minutes)">
  
  <div class="q-count-sticker">
    <span class="pulse-dot"></span>
    <span>Questions Loaded: <b id="totalQDisplay">0</b></span>
  </div>

  <div style="margin-top:15px; display:flex; gap:10px; justify-content:center;">
    <button onclick="startTest()">Start Test</button>
    <button type="button" class="btn-secondary" onclick="window.location.href='https://yashuum.github.io/B.ED_MockTest/'">Go Back</button>
  </div>
</div>

<div class="top-bar" id="topBar">
  <div><small style="opacity:0.9;">CANDIDATE:</small><br><b id="displayName"></b></div>
  <div class="timer" id="timer">00:00</div>
</div>

<div id="palette" class="palette"></div>
<div id="quizArea"></div>

<div class="nav" id="navBtns" style="display:none">
  <button class="btn-secondary" onclick="prevQ()">← Previous</button>
  <button onclick="nextQ()">Next Question →</button>
</div>

<button id="submitBtn" style="display:none; margin: 30px auto 0; width: 100%;" onclick="submitQuiz()">Submit Test Now</button>

<div id="result" class="result" style="display:none"></div>
<button id="clearBtn" class="btn-secondary" style="display:none; width:100%; margin-top:20px; background:var(--danger);" onclick="clearResult()">Clear Result & Start New</button>

</div>

<script>
// --- UNIQUE ID CONFIG ---
const MY_SUBJECT = "Hindi";
const MY_TEST_ID = "HIN_SET_02"; 

const questions = [

{q: "गद्यांश: 'शिक्षा का वास्तविक उद्देश्य केवल साक्षरता प्राप्त करना नहीं है, बल्कि मनुष्य के चरित्र का निर्माण करना है। एक शिक्षित व्यक्ति वही है जो समाज के प्रति अपने कर्तव्यों को समझे। अनुशासन और नैतिकता ही शिक्षा की नींव हैं। आज की युवा पीढ़ी को किताबी ज्ञान के साथ-साथ व्यावहारिक ज्ञान पर भी ध्यान देना चाहिए।' प्रश्न: शिक्षा का असली उद्देश्य क्या है?", options: ["केवल पढ़ाई करना", "चरित्र का निर्माण", "नौकरी पाना", "सिर्फ साक्षर बनना"], answer: "चरित्र का निर्माण", solution: "गद्यांश की पहली पंक्ति के अनुसार शिक्षा का वास्तविक उद्देश्य चरित्र निर्माण है।"},
{q: "गद्यांश: 'शिक्षा का वास्तविक उद्देश्य केवल साक्षरता प्राप्त करना नहीं है, बल्कि मनुष्य के चरित्र का निर्माण करना है। एक शिक्षित व्यक्ति वही है जो समाज के प्रति अपने कर्तव्यों को समझे। अनुशासन और नैतिकता ही शिक्षा की नींव हैं। आज की युवा पीढ़ी को किताबी ज्ञान के साथ-साथ व्यावहारिक ज्ञान पर भी ध्यान देना चाहिए।' प्रश्न: शिक्षा की नींव किन्हें माना गया है?", options: ["धन और वैभव", "अनुशासन और नैतिकता", "किताबें और पेन", "स्कूल और कॉलेज"], answer: "अनुशासन और नैतिकता", solution: "गद्यांश में स्पष्ट कहा गया है कि अनुशासन और नैतिकता ही शिक्षा की नींव हैं।"},
{q: "गद्यांश: 'शिक्षा का वास्तविक उद्देश्य केवल साक्षरता प्राप्त करना नहीं है, बल्कि मनुष्य के चरित्र का निर्माण करना है। एक शिक्षित व्यक्ति वही है जो समाज के प्रति अपने कर्तव्यों को समझे। अनुशासन और नैतिकता ही शिक्षा की नींव हैं। आज की युवा पीढ़ी को किताबी ज्ञान के साथ-साथ व्यावहारिक ज्ञान पर भी ध्यान देना चाहिए।' प्रश्न: एक शिक्षित व्यक्ति में क्या गुण होना चाहिए?", options: ["वह अमीर हो", "वह समाज के प्रति कर्तव्यों को समझे", "वह सिर्फ बोलना जाने", "वह विदेश में रहे"], answer: "वह समाज के प्रति कर्तव्यों को समझे", solution: "गद्यांश के अनुसार शिक्षित व्यक्ति वही है जो समाज के प्रति कर्तव्यों को समझता है।"},
{q: "गद्यांश: 'शिक्षा का वास्तविक उद्देश्य केवल साक्षरता प्राप्त करना नहीं है, बल्कि मनुष्य के चरित्र का निर्माण करना है। एक शिक्षित व्यक्ति वही है जो समाज के प्रति अपने कर्तव्यों को समझे। अनुशासन और नैतिकता ही शिक्षा की नींव हैं। आज की युवा पीढ़ी को किताबी ज्ञान के साथ-साथ व्यावहारिक ज्ञान पर भी ध्यान देना चाहिए।' प्रश्न: युवा पीढ़ी को किस तरह के ज्ञान पर ध्यान देने की सलाह दी गई है?", options: ["सिर्फ किताबी ज्ञान", "व्यावहारिक ज्ञान", "केवल तकनीकी ज्ञान", "सिर्फ खेलकूद"], answer: "व्यावहारिक ज्ञान", solution: "गद्यांश में किताबी ज्ञान के साथ व्यावहारिक ज्ञान पर जोर दिया गया है।"},
{q: "गद्यांश: 'शिक्षा का वास्तविक उद्देश्य केवल साक्षरता प्राप्त करना नहीं है, बल्कि मनुष्य के चरित्र का निर्माण करना है। एक शिक्षित व्यक्ति वही है जो समाज के प्रति अपने कर्तव्यों को समझे। अनुशासन और नैतिकता ही शिक्षा की नींव हैं। आज की युवा पीढ़ी को किताबी ज्ञान के साथ-साथ व्यावहारिक ज्ञान पर भी ध्यान देना चाहिए।' प्रश्न: 'साक्षरता' शब्द का अर्थ क्या है?", options: ["लिखना-पढ़ना जानना", "बहुत अमीर होना", "मूर्ख होना", "अंधविश्वासी होना"], answer: "लिखना-पढ़ना जानना", solution: "साक्षरता का सामान्य अर्थ अक्षरों का ज्ञान या पढ़ना-लिखना जानना है।"},
{q: "गद्यांश: 'समय का सदुपयोग ही सफलता की कुंजी है। जो व्यक्ति समय की कद्र नहीं करता, समय उसे पीछे छोड़ देता है। महापुरुषों के जीवन से हमें यही सीख मिलती है कि उन्होंने अपने जीवन का प्रत्येक क्षण कार्य में लगाया। आलस्य मनुष्य का सबसे बड़ा शत्रु है। हमें कल के काम को आज ही पूरा करने की आदत डालनी चाहिए।' प्रश्न: सफलता की कुंजी क्या है?", options: ["बहुत पैसा होना", "समय का सदुपयोग", "आलस्य करना", "किस्मत का सहारा"], answer: "समय का सदुपयोग", solution: "गद्यांश की पहली पंक्ति कहती है कि समय का सदुपयोग ही सफलता की कुंजी है।"},
{q: "गद्यांश: 'समय का सदुपयोग ही सफलता की कुंजी है। जो व्यक्ति समय की कद्र नहीं करता, समय उसे पीछे छोड़ देता है। महापुरुषों के जीवन से हमें यही सीख मिलती है कि उन्होंने अपने जीवन का प्रत्येक क्षण कार्य में लगाया। आलस्य मनुष्य का सबसे बड़ा शत्रु है। हमें कल के काम को आज ही पूरा करने की आदत डालनी चाहिए।' प्रश्न: मनुष्य का सबसे बड़ा शत्रु किसे कहा गया है?", options: ["पड़ोसी को", "काम को", "आलस्य को", "समय को"], answer: "आलस्य को", solution: "गद्यांश के अनुसार आलस्य मनुष्य का सबसे बड़ा शत्रु है।"},
{q: "गद्यांश: 'समय का सदुपयोग ही सफलता की कुंजी है। जो व्यक्ति समय की कद्र नहीं करता, समय उसे पीछे छोड़ देता है। महापुरुषों के जीवन से हमें यही सीख मिलती है कि उन्होंने अपने जीवन का प्रत्येक क्षण कार्य में लगाया। आलस्य मनुष्य का सबसे बड़ा शत्रु है। हमें कल के काम को आज ही पूरा करने की आदत डालनी चाहिए।' प्रश्न: महापुरुषों के जीवन से हमें क्या प्रेरणा मिलती है?", options: ["आराम करने की", "समय बर्बाद करने की", "प्रत्येक क्षण का उपयोग करने की", "सोने की"], answer: "प्रत्येक क्षण का उपयोग करने की", solution: "महापुरुषों ने अपने जीवन का हर क्षण कार्य में लगाया, यही सीख मिलती है।"},
{q: "गद्यांश: 'समय का सदुपयोग ही सफलता की कुंजी है। जो व्यक्ति समय की कद्र नहीं करता, समय उसे पीछे छोड़ देता है। महापुरुषों के जीवन से हमें यही सीख मिलती है कि उन्होंने अपने जीवन का प्रत्येक क्षण कार्य में लगाया। आलस्य मनुष्य का सबसे बड़ा शत्रु है। हमें कल के काम को आज ही पूरा करने की आदत डालनी चाहिए।' प्रश्न: हमें किस तरह की आदत डालनी चाहिए?", options: ["काम टालने की", "कल का काम आज करने की", "देर से उठने की", "खेलते रहने की"], answer: "कल का काम आज करने की", solution: "गद्यांश के अंत में कल के काम को आज करने की आदत डालने की सलाह दी गई है।"},
{q: "गद्यांश: 'समय का सदुपयोग ही सफलता की कुंजी है। जो व्यक्ति समय की कद्र नहीं करता, समय उसे पीछे छोड़ देता है। महापुरुषों के जीवन से हमें यही सीख मिलती है कि उन्होंने अपने जीवन का प्रत्येक क्षण कार्य में लगाया। आलस्य मनुष्य का सबसे बड़ा शत्रु है। हमें कल के काम को आज ही पूरा करने की आदत डालनी चाहिए।' प्रश्न: 'सदुपयोग' शब्द का विलोम क्या होगा?", options: ["उपयोग", "दुरुपयोग", "प्रयोग", "अनुपयोग"], answer: "दुरुपयोग", solution: "सदुपयोग (अच्छा उपयोग) का विलोम दुरुपयोग (बुरा उपयोग) होता है।"},
{q: "‘हिमालय’ शब्द में कौन सी संज्ञा है?", options: ["जातिवाचक", "व्यक्तिवाचक", "भाववाचक", "समूहवाचक"], answer: "व्यक्तिवाचक", solution: "एक विशेष पर्वत का नाम होने के कारण यह व्यक्तिवाचक संज्ञा है।"},
{q: "‘दूध’ शब्द संज्ञा के किस भेद के अंतर्गत आता है?", options: ["जातिवाचक", "द्रव्यवाचक", "व्यक्तिवाचक", "भाववाचक"], answer: "द्रव्यवाचक", solution: "तरल पदार्थों को द्रव्यवाचक संज्ञा माना जाता है।"},
{q: "‘हँसी’ शब्द में कौन सी संज्ञा है?", options: ["भाववाचक", "जातिवाचक", "व्यक्तिवाचक", "द्रव्यवाचक"], answer: "भाववाचक", solution: "हँसी एक भाव या क्रिया का रूप है, जिसे महसूस किया जा सकता है।"},
{q: "‘वह कल आएगा’—इस वाक्य में ‘वह’ क्या है?", options: ["संज्ञा", "सर्वनाम", "विशेषण", "क्रिया"], answer: "सर्वनाम", solution: "नाम के स्थान पर प्रयुक्त होने वाला शब्द सर्वनाम है।"},
{q: "‘मैं अपने आप काम कर लूँगा’—यहाँ ‘अपने आप’ कैसा सर्वनाम है?", options: ["पुरुषवाचक", "निजवाचक", "निश्चयवाचक", "प्रश्नवाचक"], answer: "निजवाचक", solution: "स्वयं के लिए प्रयुक्त होने वाले शब्द निजवाचक होते हैं।"},
{q: "‘काला घोड़ा दौड़ रहा है’—वाक्य में ‘काला’ क्या है?", options: ["संज्ञा", "विशेषण", "क्रिया", "अव्यय"], answer: "विशेषण", solution: "काला शब्द घोड़े की विशेषता बता रहा है।"},
{q: "‘राम ने रोटी खाई’—यहाँ ‘ने’ किस कारक का चिह्न है?", options: ["कर्ता", "कर्म", "करण", "अपादान"], answer: "कर्ता", solution: "कर्ता कारक का विभक्ति चिह्न 'ने' है।"},
{q: "‘पेड़ से फल गिरा’—यहाँ ‘से’ कौन सा कारक है?", options: ["करण", "अपादान", "सम्प्रदान", "संबंध"], answer: "अपादान", solution: "अलग होने के अर्थ में 'से' अपादान कारक है।"},
{q: "‘चाकू से फल काटो’—यहाँ ‘से’ में कौन सा कारक है?", options: ["करण", "अपादान", "कर्ता", "अधिकरण"], answer: "करण", solution: "साधन (Instrument) के रूप में करण कारक आता है।"},
{q: "‘हे राम! मेरी मदद करो’—यहाँ कौन सा कारक है?", options: ["संबोधन", "अपादान", "अधिकरण", "संबंध"], answer: "संबोधन", solution: "पुकारने या बुलाने के लिए संबोधन कारक प्रयुक्त होता है।"},
{q: "‘मेज पर पुस्तक है’—यहाँ ‘पर’ कारक चिह्न है:", options: ["करण", "अधिकरण", "सम्प्रदान", "अपादान"], answer: "अधिकरण", solution: "स्थान या आधार बताने के लिए अधिकरण का प्रयोग होता है।"},
{q: "‘गरीब को दान दो’—यहाँ ‘को’ किस कारक के लिए है?", options: ["कर्म", "सम्प्रदान", "अपादान", "करण"], answer: "सम्प्रदान", solution: "देने के भाव में यहाँ सम्प्रदान कारक है।"},
{q: "‘विद्यार्थी’ शब्द में कौन सी संज्ञा है?", options: ["व्यक्तिवाचक", "जातिवाचक", "समूहवाचक", "भाववाचक"], answer: "जातिवाचक", solution: "यह संपूर्ण छात्र वर्ग का बोध कराता है।"},
{q: "‘सोना’ (Gold) में संज्ञा है:", options: ["जातिवाचक", "द्रव्यवाचक", "भाववाचक", "समूहवाचक"], answer: "द्रव्यवाचक", solution: "धातु होने के कारण द्रव्यवाचक।"},
{q: "‘चार लीटर तेल’—इसमें विशेषण का कौन सा भेद है?", options: ["गुणवाचक", "संख्यावाचक", "परिमाणवाचक", "सार्वनामिक"], answer: "परिमाणवाचक", solution: "नाप-तौल का बोध परिमाणवाचक विशेषण कराता है।"},
{q: "‘वह लड़का बुद्धिमान है’—यहाँ ‘वह’ कैसा विशेषण है?", options: ["गुणवाचक", "परिमाणवाचक", "सार्वनामिक", "संख्यावाचक"], answer: "सार्वनामिक", solution: "संज्ञा से पहले आने वाला सर्वनाम सार्वनामिक विशेषण है।"},
{q: "‘अपादान कारक’ की विभक्ति क्या है?", options: ["ने", "को", "से (अलग)", "के लिए"], answer: "से (अलग)", solution: "अपादान = से (अलग होना)।"},
{q: "‘संबंध कारक’ का चिह्न पहचानें:", options: ["में, पर", "का, की, के", "हे, अरे", "को"], answer: "का, की, के", solution: "का, की, के संबंध कारक के चिह्न हैं।"},
{q: "‘पशुता’ किस प्रकार की संज्ञा है?", options: ["जातिवाचक", "भाववाचक", "द्रव्यवाचक", "व्यक्तिवाचक"], answer: "भाववाचक", solution: "पशु से बना भाववाचक शब्द पशुता है।"},
{q: "‘भीड़’ शब्द में कौन सी संज्ञा है?", options: ["व्यक्तिवाचक", "समूहवाचक", "जातिवाचक", "द्रव्यवाचक"], answer: "समूहवाचक", solution: "व्यक्तियों के समूह को भीड़ कहते हैं।"},
{q: "‘मिठाई’ शब्द व्याकरण की दृष्टि से क्या है?", options: ["विशेषण", "संज्ञा", "सर्वनाम", "क्रिया"], answer: "संज्ञा", solution: "मिठाई एक जातिवाचक संज्ञा है।"},
{q: "‘तुम कहाँ जा रहे हो?’—यहाँ ‘तुम’ सर्वनाम है:", options: ["उत्तम पुरुष", "मध्यम पुरुष", "अन्य पुरुष", "निजवाचक"], answer: "मध्यम पुरुष", solution: "श्रोता के लिए मध्यम पुरुष (तुम, आप) आता है।"},
{q: "‘राम की पुस्तक’—यहाँ ‘की’ कारक है:", options: ["कर्ता", "संबंध", "करण", "अपादान"], answer: "संबंध", solution: "राम और पुस्तक के बीच संबंध।"},
{q: "‘छत के ऊपर पक्षी हैं’—यहाँ ‘के ऊपर’ कारक है:", options: ["करण", "अपादान", "अधिकरण", "सम्प्रदान"], answer: "अधिकरण", solution: "स्थान का बोध कराने वाला अधिकरण।"},
{q: "‘कोई आ रहा है’—वाक्य में ‘कोई’ कैसा सर्वनाम है?", options: ["निश्चयवाचक", "अनिश्चयवाचक", "प्रश्नवाचक", "संबंधवाचक"], answer: "अनिश्चयवाचक", solution: "जहाँ निश्चितता न हो, वह अनिश्चयवाचक है।"}

  
];

let currentIndex=0,answers={},visited={};
let totalSeconds=0,timerInterval,startTime;

function startTest(){
  if(!candidateName.value || !testTime.value) {
    alert("Please enter Name and Time"); return;
  }
  displayName.textContent=candidateName.value;
  startScreen.style.display="none";
  topBar.style.display="flex";
  palette.style.display="flex"; 
  navBtns.style.display="flex";
  submitBtn.style.display="block";
  totalSeconds=testTime.value*60;
  startTime=Date.now();
  saveProgress();
  startTimer();
  renderQuestion();
}

function startTimer(){
  timerInterval=setInterval(()=>{
    totalSeconds--;
    updateTimer();
    saveProgress();
    if(totalSeconds<=0)submitQuiz();
  },1000);
}

function updateTimer(){
  timer.textContent=
    String(Math.floor(totalSeconds/60)).padStart(2,'0')+":"+
    String(totalSeconds%60).padStart(2,'0');
}

function renderQuestion(){
  visited[currentIndex]=true;
  const q=questions[currentIndex];
  quizArea.innerHTML=`
    <div class="quiz-card">
      <b style="display:block; margin-bottom:15px; font-size:1.1em;">Q${currentIndex+1}. ${q.q}</b>
      <div class="options">
        ${q.options.map(o=>`
          <label>
            <input type="radio" name="opt"
              ${answers[currentIndex]==o?'checked':''}
              onchange="selectAnswer('${o}')">
            ${o}
          </label>
        `).join("")}
      </div>
    </div>`;
  renderPalette();
  saveProgress();
}

function selectAnswer(val){
  answers[currentIndex]=val;
  saveProgress();
  renderPalette();
}

function renderPalette(){
  palette.innerHTML="";
  questions.forEach((_,i)=>{
    const s=document.createElement("span");
    s.textContent=i+1;
    if(visited[i])s.classList.add("visited");
    if(answers[i])s.classList.add("attempted");
    s.onclick=()=>{currentIndex=i;renderQuestion()};
    palette.appendChild(s);
  });
}

function nextQ(){if(currentIndex<questions.length-1){currentIndex++;renderQuestion();}}
function prevQ(){if(currentIndex>0){currentIndex--;renderQuestion();}}

function saveProgress(){
  localStorage.setItem(`inProgress_${MY_SUBJECT}`,JSON.stringify({
    name:displayName.textContent,
    answers,visited,currentIndex,totalSeconds,startTime
  }));
}

function submitQuiz(){
  if(!confirm("Are you sure you want to submit the Hindi test?")) return;
  clearInterval(timerInterval);
  localStorage.removeItem(`inProgress_${MY_SUBJECT}`);
  let correct=0, attempted=0;
  let detailHtml="<h2>Detailed Analysis</h2>";
  
  questions.forEach((q,i)=>{
    if(answers[i]) attempted++;
    if(answers[i] == q.answer) correct++;
    
    detailHtml+=`
      <div style="margin:10px 0; padding:15px; background:rgba(255,255,255,0.05); border-radius:15px; border-left:5px solid ${answers[i]==q.answer?'#4ade80':'#f87171'}">
        <p><b>Q${i+1}.</b> ${q.q}</p>
        <p style="margin-top:8px;">Your Answer: <span class="${answers[i]==q.answer?'correct':'wrong'}">${answers[i]||"Skipped"}</span> | Correct: <b style="color:#4ade80;">${q.answer}</b></p>
        <div class="sol-box">
          <b>Logic:</b> ${q.solution || "Solution not available."}
        </div>
      </div>`;
  });

  const timeTaken = Math.floor((Date.now() - startTime) / 1000);
  const accuracy = attempted ? Math.round((correct / attempted) * 100) : 0;

  localStorage.setItem(`done_${MY_SUBJECT}_${MY_TEST_ID}`, "true");
  localStorage.setItem(`score_${MY_TEST_ID}`, `${correct} / ${questions.length}`);

  const summaryBox = `
    <div style="text-align:center; padding:25px; background:rgba(255,255,255,0.15); border-radius:20px; margin-bottom:25px; border:1px solid var(--glass-border);">
      <h3 style="margin-bottom:15px; color:var(--color-accent);">Hindi Performance Report</h3>
      <div style="display:grid; grid-template-columns: 1fr 1fr; gap:15px; font-size:14px;">
        <div style="background:rgba(255,255,255,0.1); padding:10px; border-radius:10px;">Final Score: <br><b style="font-size:18px;">${correct} / ${questions.length}</b></div>
        <div style="background:rgba(255,255,255,0.1); padding:10px; border-radius:10px;">Attempted: <br><b style="font-size:18px;">${attempted}</b></div>
        <div style="background:rgba(255,255,255,0.1); padding:10px; border-radius:10px;">Accuracy: <br><b style="font-size:18px; color:#4ade80;">${accuracy}%</b></div>
        <div style="background:rgba(255,255,255,0.1); padding:10px; border-radius:10px;">Time Taken: <br><b style="font-size:18px;">${Math.floor(timeTaken/60)}m ${timeTaken%60}s</b></div>
      </div>
      <button onclick="window.location.href='https://yashuum.github.io/B.ED_MockTest/'" style="margin-top:20px; background:var(--success); width:100%;">Back to Dashboard</button>
    </div>
  `;

  const finalHtml = summaryBox + detailHtml;
  localStorage.setItem(`finalResult_${MY_SUBJECT}`, JSON.stringify({ name:displayName.textContent, html: finalHtml }));

  emailjs.send("service_wq5yoyp", "template_doegpcp", {
    candidate_name: displayName.textContent,
    subject: MY_SUBJECT,
    score: correct,
    total: questions.length,
    attempted: attempted,
    accuracy: accuracy + "%",
    time_taken: `${Math.floor(timeTaken/60)}m ${timeTaken%60}s`,
    test_date: new Date().toLocaleString("en-IN")
  });

  quizArea.innerHTML=""; palette.style.display="none"; navBtns.style.display="none";
  submitBtn.style.display="none"; result.style.display="block"; result.innerHTML=finalHtml;
  clearBtn.style.display="block"; window.scrollTo(0,0);
}

window.onload=function(){
  document.getElementById("totalQDisplay").textContent = questions.length;
  document.getElementById("testTime").value = questions.length;

  const final=localStorage.getItem(`finalResult_${MY_SUBJECT}`);
  const progress=localStorage.getItem(`inProgress_${MY_SUBJECT}`);
  
  if(final){
    const d=JSON.parse(final);
    startScreen.style.display="none"; topBar.style.display="flex";
    displayName.textContent=d.name; result.style.display="block"; result.innerHTML=d.html;
    clearBtn.style.display="block";
  } else if(progress){
    const p=JSON.parse(progress);
    displayName.textContent=p.name; answers=p.answers||{}; visited=p.visited||{};
    currentIndex=p.currentIndex||0; totalSeconds=p.totalSeconds||0; startTime=p.startTime||Date.now();
    startScreen.style.display="none"; topBar.style.display="flex"; palette.style.display="flex";
    navBtns.style.display="flex"; submitBtn.style.display="block"; startTimer(); renderQuestion();
  }
};

function clearResult(){
  if(confirm("Start new test? Hindi results will be cleared.")){ 
    localStorage.removeItem(`finalResult_${MY_SUBJECT}`);
    localStorage.removeItem(`inProgress_${MY_SUBJECT}`);
    location.reload(); 
  }
}
</script>
</body>
</html>

