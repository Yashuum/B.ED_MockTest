<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NishuAbhyasi – English by Yash</title>
    <style>
        :root{
            --color-primary: #1a2a6c;
            --color-secondary: #2575fc;
            --color-accent: #f2994a;
            --glass: rgba(255, 255, 255, 0.12);
            --glass-border: rgba(255, 255, 255, 0.25);
            --success: #16a34a;
            --danger: #ef4444;
            --review: #8b5cf6;
            --challenge: #f59e0b;
        }
        *{box-sizing:border-box; margin:0; padding:0; font-family:'Segoe UI', Tahoma, sans-serif;}
        body{
            min-height:100vh;
            background: linear-gradient(-45deg, var(--color-primary), var(--color-secondary), var(--color-primary), var(--color-accent));
            background-size: 300% 300%;
            animation: dynamicFlow 18s ease-in-out infinite;
            color: #fff;
            padding: 20px 10px;
        }
        @keyframes dynamicFlow { 0% { background-position: 0% 50%; } 50% { background-position: 100% 50%; } 100% { background-position: 0% 50%; } }
        @keyframes pulse { 0% { transform: scale(1); opacity: 1; } 50% { transform: scale(1.5); opacity: 0.5; } 100% { transform: scale(1); opacity: 1; } }
        
        .container{ max-width:900px; margin:auto; position: relative; z-index: 2; }
        h1{ text-align:center; margin-bottom:10px; font-weight: 800; text-shadow: 0 4px 10px rgba(0,0,0,0.3); }

        .start-screen{ background: var(--glass); backdrop-filter: blur(20px); border: 1px solid var(--glass-border); padding: 40px 20px; border-radius: 30px; text-align:center; margin-top: 50px; display: flex; flex-direction: column; gap: 15px; align-items: center; }
        .input-row { display: flex; gap: 15px; width: 100%; max-width: 600px; justify-content: center; }
        .start-screen input, .start-screen select { 
            width: 100%; padding: 15px; border-radius: 15px; border: 1px solid var(--glass-border); 
            background: rgba(255, 255, 255, 0.15); color: #fff; font-size: 16px; outline: none; 
        }
		.start-screen input::placeholder { color: white !important; opacity: 1; }
        .start-screen option { color: #000; }
        
        .q-count-sticker { background: rgba(255, 255, 255, 0.1); padding: 8px 20px; border-radius: 50px; border: 1px solid var(--glass-border); font-size: 14px; display: flex; align-items: center; gap: 10px; }
        .pulse-dot { width: 8px; height: 8px; background: #4facfe; border-radius: 50%; animation: pulse 1.5s infinite; }
        
        button{ padding: 14px 28px; border: none; border-radius: 15px; background: linear-gradient(135deg, #ff9800, #ff5722); color: #fff; cursor: pointer; font-weight: 700; transition: 0.3s; }
        button:hover:not(:disabled){ transform: scale(1.05); }
        button:disabled{ opacity: 0.5; cursor: not-allowed; }
        
        .btn-secondary { background: rgba(255,255,255,0.15); }
        .btn-review { background: var(--review); }
        .btn-challenge { background: var(--challenge); }
        .btn-clear { background: transparent; border: 1px solid #fff; padding: 6px 12px; font-size: 12px; margin-top: 10px; border-radius: 8px; cursor: pointer; color: #fff; }

        .top-bar{ display:none; justify-content:space-between; align-items:center; padding:15px 25px; background: var(--glass); backdrop-filter: blur(15px); border:1px solid var(--glass-border); border-radius:50px; position:sticky; top:10px; z-index:100; margin-bottom:15px; }
        .timer{ font-weight:800; color:#fff; background: var(--danger); padding: 5px 15px; border-radius: 20px; }
        
        #palette{ display:none; flex-wrap:wrap; gap:8px; margin-bottom:20px; justify-content: center; padding: 10px; }
        .palette span{ width:38px; height:38px; display:flex; align-items:center; justify-content:center; border-radius:10px; background: rgba(255,255,255,0.1); border: 1px solid var(--glass-border); cursor:pointer; font-size: 13px; }
        .palette .visited{ border: 2px solid var(--color-secondary); }
        .palette .attempted{ background: var(--success); box-shadow: 0 0 8px var(--success); }
        .palette .marked-review{ background: var(--review); }
        .palette .challenged{ background: var(--challenge); }

        .quiz-card{ background: var(--glass); border:1px solid var(--glass-border); backdrop-filter: blur(20px); border-radius:25px; padding:30px; }
        .options label{ display:flex; align-items: center; gap:12px; padding:14px; background: rgba(255,255,255,0.05); border:1px solid var(--glass-border); border-radius:15px; margin:10px 0; cursor:pointer; transition: 0.2s; }
        .options label:hover{ background: rgba(255,255,255,0.15); transform: translateX(5px); }
        
        .nav{ display:none; justify-content:space-between; margin-top:20px; flex-wrap: wrap; gap: 10px; }
        .result{ background: var(--glass); padding: 25px; border-radius: 25px; margin-top:20px; }
        .correct{ color: #4ade80; font-weight:bold; }
        .wrong{ color: #f87171; font-weight:bold; }
        .sol-box { margin-top:12px; padding:12px; background:rgba(242, 153, 74, 0.15); border-radius:12px; font-size:14px; color:#ffcc80; border: 1px dashed var(--color-accent); }
    </style>
    <script src="https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js"></script>
    <script> (function () { emailjs.init("L8kGW-X7JOiYaycH5"); })(); </script>
</head>
<body>
<div class="container">
    <h1>Target Test- English 2026</h1>
    <p style="text-align:center; opacity:0.8; font-size:13px; margin-bottom:20px; color:#fff;">Last Updated: 13 Feb, 2026 - 05:08 PM</p>
    
    <div class="start-screen" id="startScreen">
        <div class="input-row">
            <input id="candidateName" placeholder="Enter your name">
            <input id="testTime" type="number" placeholder="Minutes">
        </div>
        
        <select id="difficultyLevel" style="max-width: 600px;" onchange="syncCountAndTime()">
            <option value="easy">Level: Easy</option>
            <option value="medium">Medium</option>
            <option value="hard">Hard</option>
        </select>

        <div class="q-count-sticker">
            <span class="pulse-dot"></span>
            <span>Questions Loaded: <b id="totalQDisplay">0</b></span>
        </div>

        <div style="display:flex; gap:10px;">
            <button onclick="startTest()">Start Test</button>
            <button type="button" class="btn-secondary" onclick="window.location.href='https://yashuum.github.io/B.ED_MockTest/'">Go Back</button>
        </div>
    </div>

    <div class="top-bar" id="topBar">
        <div><small style="opacity:0.9;">CANDIDATE:</small><br><b id="displayName"></b></div>
        <div class="timer" id="timer">00:00</div>
    </div>

    <div id="palette" class="palette"></div>
    <div id="quizArea"></div>

    <div class="nav" id="navBtns">
        <button class="btn-secondary" onclick="prevQ()" id="prevBtn">← Prev</button>
        <button class="btn-review" onclick="markForReview()">Review</button>
        <button class="btn-challenge" onclick="challengeQuestion()">Challenge</button>
        <div style="display:flex; flex-direction:column; align-items:center;">
            <button onclick="nextQ()" id="nextBtn">Next →</button>
            <span id="lastQMsg" style="font-size:10px; color:var(--color-accent); margin-top:5px; display:none;">Last question, submit test now</span>
        </div>
    </div>

    <button id="submitBtn" style="display:none; margin: 30px auto 0; width: 100%;" onclick="submitQuiz()">Submit Test Now</button>
    <div id="result" class="result" style="display:none"></div>
    <button id="clearBtn" class="btn-secondary" style="display:none; width:100%; margin-top:20px; background:var(--danger);" onclick="clearResult()">Clear Result & Restart</button>
</div>

<script>
    const MY_SUBJECT = "English";
    const MY_TEST_ID = "ENG_SET_08";

    const allQuestionsBank = {
easy: [

{q:"Fill in the blank: Honesty is ___ best policy.",options:["a","an","the","no article"],answer:"the",solution:"Superlative adjectives (best) always take 'the' before them."},
{q:"Spot the error: She do not / like / to play / tennis.",options:["She do not","like","to play","tennis"],answer:"She do not",solution:"With singular subjects (She), we use 'does not' instead of 'do not'."},
{q:"Fill in the blank: I saw ___ elephant in the zoo.",options:["a","an","the","no article"],answer:"an",solution:"Words starting with a vowel sound (e, a, i, o, u) take 'an'."},
{q:"Fill in the blank: He is ___ European.",options:["a","an","the","no article"],answer:"a",solution:"'European' starts with a consonant sound 'Yoo', so we use 'a'."},
{q:"Spot the error: Ram and Shyam / is / going / to school.",options:["Ram and Shyam","is","going","to school"],answer:"is",solution:"Plural subjects joined by 'and' take a plural verb 'are'."},
{q:"Fill in the blank: Sun rises in ___ East.",options:["a","an","the","no article"],answer:"the",solution:"Universal objects (Sun) and directions (East) take 'the'."},
{q:"Fill in the blank: It has been raining ___ morning.",options:["for","since","from","to"],answer:"since",solution:"'Since' is used for a specific point in time (morning)."},
{q:"Spot the error: He has / buy / a new / car.",options:["He has","buy","a new","car"],answer:"buy",solution:"After 'has/have', the third form of the verb (bought) is used."},
{q:"Fill in the blank: Give me ___ one-rupee note.",options:["a","an","the","no article"],answer:"a",solution:"'One' starts with a 'Wa' consonant sound, so 'a' is correct."},
{q:"Fill in the blank: This is ___ book I was looking for.",options:["a","an","the","no article"],answer:"the",solution:"'The' is used when talking about a specific/particular thing."},
{q:"Spot the error: I am / more taller / than / my brother.",options:["I am","more taller","than","my brother"],answer:"more taller",solution:"Never use 'more' with a comparative adjective that already ends in 'er'."},
{q:"Fill in the blank: My father is ___ M.A. in English.",options:["a","an","the","no article"],answer:"an",solution:"'M.A.' starts with a vowel sound 'Em', so we use 'an'."},
{q:"Fill in the blank: Bread and butter ___ my favorite breakfast.",options:["is","are","were","have"],answer:"is",solution:"When two words express one single idea, we use a singular verb."},
{q:"Spot the error: They / has finished / their / work.",options:["They","has finished","their","work"],answer:"has finished",solution:"With plural subjects (They), we use 'have'."},
{q:"Fill in the blank: Please sit ___ the chair.",options:["on","in","at","upon"],answer:"on",solution:"'On' is used when something is touching the surface of another thing."},
{q:"Fill in the blank: She is ___ tallest girl in the class.",options:["a","an","the","no article"],answer:"the",solution:"Superlative degree (tallest) always takes 'the'."},
{q:"Spot the error: One of / my friend / is / a doctor.",options:["One of","my friend","is","a doctor"],answer:"my friend",solution:"After 'One of', the noun should always be plural (friends)."},
{q:"Fill in the blank: Do you have ___ umbrella?",options:["a","an","the","no article"],answer:"an",solution:"Vowel sound 'Um' takes 'an'."},
{q:"Fill in the blank: I go to school ___ bus.",options:["by","with","from","in"],answer:"by",solution:"For modes of transport, we use the preposition 'by'."},
{q:"Spot the error: The boys / was playing / in the / garden.",options:["The boys","was playing","in the","garden"],answer:"was playing",solution:"Plural subject (boys) takes 'were'."},
{q:"Fill in the blank: He is afraid ___ dogs.",options:["of","from","with","at"],answer:"of",solution:"The word 'afraid' is always followed by the preposition 'of'."},
{q:"Fill in the blank: I have ___ egg for breakfast.",options:["a","an","the","no article"],answer:"an",solution:"Vowel sound 'Eh' for egg takes 'an'."},
{q:"Spot the error: She / did not / wrote / a letter.",options:["She","did not","wrote","a letter"],answer:"wrote",solution:"After 'did not', we always use the first form of the verb (write)."},
{q:"Fill in the blank: Cow is ___ useful animal.",options:["a","an","the","no article"],answer:"a",solution:"'Useful' starts with a 'Yoo' sound, which is a consonant sound."},
{q:"Fill in the blank: Look ___ the blackboard.",options:["on","at","in","to"],answer:"at",solution:"'At' is used to point towards a specific object or direction."},
{q:"Spot the error: My cat / have / white / fur.",options:["My cat","have","white","fur"],answer:"have",solution:"Singular subject (cat) takes 'has'."},
{q:"Fill in the blank: Ganga is ___ holy river.",options:["a","an","the","no article"],answer:"a",solution:"Simple consonant sound 'Ha' for holy takes 'a'."},
{q:"Fill in the blank: He is ___ honest officer.",options:["a","an","the","no article"],answer:"an",solution:"'Honest' has a silent 'H' and starts with a vowel sound 'O'."},
{q:"Spot the error: Birds / flies / in the / sky.",options:["Birds","flies","in the","sky"],answer:"flies",solution:"With plural subjects, use the first form of the verb (fly)."},
{q:"Fill in the blank: I am waiting ___ the station.",options:["on","at","in","for"],answer:"at",solution:"'At' is used for a specific point or location."},
{q:"Fill in the blank: This is ___ university of repute.",options:["a","an","the","no article"],answer:"a",solution:"'University' starts with a 'Yoo' consonant sound."},
{q:"Spot the error: He is / best / player / in our team.",options:["He is","best","player","in our team"],answer:"best",solution:"Missing article 'the' before superlative 'best'."},
{q:"Fill in the blank: I am fond ___ music.",options:["of","with","to","for"],answer:"of",solution:"The adjective 'fond' always takes 'of'."},
{q:"Fill in the blank: There is ___ ant on the wall.",options:["a","an","the","no article"],answer:"an",solution:"Vowel sound 'Ae' for ant takes 'an'."},
{q:"Spot the error: She / sing / a song / very well.",options:["She","sing","a song","very well"],answer:"sing",solution:"Singular subject (She) takes verb+s (sings)."},
{q:"Fill in the blank: The pen is ___ the table.",options:["on","in","at","between"],answer:"on",solution:"Surface contact takes 'on'."},
{q:"Fill in the blank: Iron is ___ metal.",options:["a","an","the","no article"],answer:"a",solution:"Consonant sound 'Ma' for metal takes 'a'."},
{q:"Spot the error: Me / am / a / student.",options:["Me","am","a","student"],answer:"Me",solution:"Subjective pronoun 'I' should be used instead of 'Me'."},
{q:"Fill in the blank: An apple ___ day keeps the doctor away.",options:["a","an","the","no article"],answer:"a",solution:"Consonant sound 'Da' for day takes 'a'."},
{q:"Fill in the blank: He is suffering ___ fever.",options:["of","with","from","at"],answer:"from",solution:"Standard phrase is 'suffering from'."}

 ],
medium: [

{q:"Spot the error: Neither the mouse / nor the lions / is / caught.",options:["Neither the mouse","nor the lions","is","caught"],answer:"is",solution:"When subjects are joined by 'nor', the verb agrees with the nearest subject (lions - plural), so it should be 'are'."},
{q:"Improve the sentence: He is 'too' weak 'to' walk.",options:["very, to","too, for","so, that","No improvement"],answer:"No improvement",solution:"The 'too...to' structure is grammatically correct for negative results."},
{q:"Synonym of 'ABANDON':",options:["Keep","Forsake","Adopt","Arrive"],answer:"Forsake",solution:"'Abandon' and 'Forsake' both mean to leave or give up something completely."},
{q:"Antonym of 'FRAGILE':",options:["Weak","Strong","Brittle","Breakable"],answer:"Strong",solution:"'Fragile' means something that breaks easily; its opposite is 'Strong' or 'Robust'."},
{q:"Idiom: 'At the eleventh hour' means:",options:["At 11:00 AM","Very early","At the last moment","Never"],answer:"At the last moment",solution:"This idiom refers to doing something at the latest possible time."},
{q:"Spot the error: Scarcely had I / started / than / it rained.",options:["Scarcely had I","started","than","it rained"],answer:"than",solution:"'Scarcely' and 'Hardly' are always followed by 'when', not 'than'."},
{q:"Improve the sentence: If I 'was' a bird, I would fly.",options:["am","were","was being","No improvement"],answer:"were",solution:"For imaginary or hypothetical conditions, we use 'were' regardless of the subject."},
{q:"Synonym of 'CANDID':",options:["Sweet","Frank","Dishonest","Secretive"],answer:"Frank",solution:"'Candid' means being honest and straightforward."},
{q:"Antonym of 'ANCIENT':",options:["Old","Modern","Antique","Historical"],answer:"Modern",solution:"'Ancient' refers to the distant past; its opposite is 'Modern'."},
{q:"Idiom: 'A piece of cake' means:",options:["Something tasty","A difficult task","A very easy task","To be hungry"],answer:"A very easy task",solution:"Something that is very simple to do is called a 'piece of cake'."},
{q:"Spot the error: One of / the most / intelligent boy / in the class.",options:["One of","the most","intelligent boy","in the class"],answer:"intelligent boy",solution:"'One of' is always followed by a plural noun, so it should be 'intelligent boys'."},
{q:"Improve the sentence: She 'has been' living here 'since' five years.",options:["is","was","has been, for","No improvement"],answer:"has been, for",solution:"'For' is used for a duration of time (five years), whereas 'since' is for a point in time."},
{q:"Synonym of 'BENEVOLENT':",options:["Cruel","Kind","Greedy","Selfish"],answer:"Kind",solution:"'Benevolent' means well-meaning and kindly."},
{q:"Antonym of 'BARREN':",options:["Dry","Fertile","Empty","Useless"],answer:"Fertile",solution:"'Barren' means land too poor to produce vegetation; 'Fertile' is the opposite."},
{q:"Idiom: 'Once in a blue moon' means:",options:["Every night","Very rarely","Frequently","On full moon"],answer:"Very rarely",solution:"This idiom is used for something that happens almost never."},
{q:"Spot the error: I prefer / tea / than / coffee.",options:["I prefer","tea","than","coffee"],answer:"than",solution:"The verb 'prefer' is followed by the preposition 'to', not 'than'."},
{q:"Improve the sentence: Bread and butter 'are' a wholesome food.",options:["is","were","have been","No improvement"],answer:"is",solution:"When two nouns express a single idea/dish, they take a singular verb."},
{q:"Synonym of 'DILIGENT':",options:["Lazy","Hardworking","Smart","Rich"],answer:"Hardworking",solution:"'Diligent' means having or showing care and conscientiousness in one's work."},
{q:"Antonym of 'GIGANTIC':",options:["Huge","Tiny","Big","Great"],answer:"Tiny",solution:"'Gigantic' means very large; 'Tiny' means very small."},
{q:"Idiom: 'To spill the beans' means:",options:["To cook food","To drop something","To reveal a secret","To be messy"],answer:"To reveal a secret",solution:"Revealing information that was supposed to be kept private."},
{q:"Spot the error: Although he is / poor / but / he is honest.",options:["Although he is","poor","but","he is honest"],answer:"but",solution:"'Although' is followed by 'yet' or a comma, never by 'but'."},
{q:"Improve the sentence: He 'is' sleeping for two hours.",options:["has been sleeping","was sleeping","had slept","No improvement"],answer:"has been sleeping",solution:"Perfect continuous tense is used when an action started in the past and continues now."},
{q:"Synonym of 'ENORMOUS':",options:["Small","Huge","Soft","Tiny"],answer:"Huge",solution:"'Enormous' means very large in size, quantity, or extent."},
{q:"Antonym of 'OPTIMIST':",options:["Theist","Pessimist","Atheist","Artist"],answer:"Pessimist",solution:"An optimist looks at the bright side; a pessimist looks at the dark side."},
{q:"Idiom: 'Couch potato' means:",options:["A vegetable","A hardworking person","A lazy person who watches TV","A chef"],answer:"A lazy person who watches TV",solution:"Refers to someone who spends a lot of time sitting and watching television."},
{q:"Spot the error: The news / are / very / shocking.",options:["The news","are","very","shocking"],answer:"are",solution:"'News' is an uncountable noun and is always treated as singular ('is')."},
{q:"Improve the sentence: He 'is having' a lot of money.",options:["has","had","is have","No improvement"],answer:"has",solution:"Possession is expressed by 'has/have', not in the continuous form 'is having'."},
{q:"Synonym of 'FATIGUE':",options:["Energy","Tiredness","Strength","Health"],answer:"Tiredness",solution:"'Fatigue' refers to extreme tiredness resulting from mental or physical exertion."},
{q:"Antonym of 'GUILTY':",options:["Innocent","Criminal","Bad","Faulty"],answer:"Innocent",solution:"'Guilty' means responsible for a crime; 'Innocent' means not responsible."},
{q:"Idiom: 'Under the weather' means:",options:["Feeling rain","Feeling sick","Happy","Travelling"],answer:"Feeling sick",solution:"If you are 'under the weather', you feel slightly unwell or ill."},
{q:"Spot the error: Unless you / do not work hard / you will / fail.",options:["Unless you","do not work hard","you will","fail"],answer:"do not work hard",solution:"'Unless' is itself negative; we don't use 'not' in the same clause. It should be 'Unless you work hard'."},
{q:"Improve the sentence: No sooner 'had' he arrived 'when' it began to rain.",options:["did, than","had, than","had, then","No improvement"],answer:"had, than",solution:"'No sooner' is always paired with 'than'."},
{q:"Synonym of 'MISTAKE':",options:["Accurate","Error","True","Right"],answer:"Error",solution:"'Mistake' and 'Error' both refer to something that is incorrect."},
{q:"Antonym of 'ROUGH':",options:["Hard","Smooth","Tough","Coarse"],answer:"Smooth",solution:"The opposite of a rough surface is a smooth one."},
{q:"Idiom: 'Hit the nail on the head' means:",options:["To build something","To say exactly the right thing","To hurt someone","To fail"],answer:"To say exactly the right thing",solution:"Doing or saying something that is precisely correct."},
{q:"Spot the error: The police / has / arrested / the thief.",options:["The police","has","arrested","the thief"],answer:"has",solution:"'Police' is a collective noun that is always treated as plural ('have')."},
{q:"Improve the sentence: He is 'the' better 'of the' two candidates.",options:["the best","better","a better","No improvement"],answer:"No improvement",solution:"When comparing exactly two people, we use 'the + comparative degree'."},
{q:"Synonym of 'REVEAL':",options:["Hide","Show","Cover","Close"],answer:"Show",solution:"'Reveal' means to make something known or visible."},
{q:"Antonym of 'VICTORY':",options:["Win","Defeat","Success","Profit"],answer:"Defeat",solution:"Victory means winning; its opposite is defeat or loss."},
{q:"Idiom: 'Break a leg' means:",options:["To get injured","Good luck","To run fast","To fight"],answer:"Good luck",solution:"Commonly used in theatre to wish a performer good luck before a show."},
{q:"Spot the error: If he / will come / I will / help him.",options:["If he","will come","I will","help him"],answer:"will come",solution:"In conditional sentences, the 'if' clause uses simple present ('If he comes')."},
{q:"Improve the sentence: You 'need not to' go there.",options:["need not","not need","need to not","No improvement"],answer:"need not",solution:"'Need not' is a modal verb and is followed by a base verb without 'to'."},
{q:"Synonym of 'QUICK':",options:["Slow","Rapid","Delay","Late"],answer:"Rapid",solution:"Both mean moving or happening with great speed."},
{q:"Antonym of 'STINGY':",options:["Mean","Generous","Greedy","Tight"],answer:"Generous",solution:"'Stingy' means not generous; its opposite is 'Generous' (open-handed)."},
{q:"Idiom: 'Cold feet' means:",options:["Frozen feet","To be nervous","To be brave","Winter season"],answer:"To be nervous",solution:"Getting 'cold feet' means becoming too nervous to do something planned."}
	
],
hard: [

{q:"One word substitution: A person who hates mankind.",options:["Misanthrope","Misogynist","Philanthropist","Optimist"],answer:"Misanthrope",solution:"'Mis' means hate and 'Anthro' means mankind. (Misogynist = hates women)."},
{q:"Idiom: 'To cry wolf' means:",options:["To listen eagerly","To give false alarm","To be very happy","To be ruthless"],answer:"To give false alarm",solution:"Derived from the story of a boy who lied about a wolf appearing."},
{q:"Spelling Test: Choose the correctly spelled word.",options:["Occurred","Ocurred","Occured","Occurad"],answer:"Occurred",solution:"The verb 'Occur' doubles the 'r' when adding 'ed' or 'ing'."},
{q:"One word substitution: A place where bees are kept.",options:["Aviary","Apiary","Aquarium","Zoo"],answer:"Apiary",solution:"'Api' refers to bees; 'Avi' refers to birds (Aviary)."},
{q:"Idiom: 'To burn the candle at both ends' means:",options:["To be very rich","To work extremely hard","To waste money","To be stingy"],answer:"To work extremely hard",solution:"It means to exhaust oneself by doing too much without enough rest."},
{q:"Spelling Test: Choose the correctly spelled word.",options:["Maintenance","Maintainance","Maintenence","Maintenense"],answer:"Maintenance",solution:"People often confuse it with 'Maintain', but the correct spelling uses 'ten' in the middle."},
{q:"One word substitution: One who is all-powerful.",options:["Omniscient","Omnipresent","Omnipotent","Eternal"],answer:"Omnipotent",solution:"'Potency' means power; 'Omni' means all. (Omniscient = all-knowing)."},
{q:"Idiom: 'To leave no stone unturned' means:",options:["To search for treasure","To try every possible way","To be lazy","To ignore things"],answer:"To try every possible way",solution:"Using all available means to achieve a goal."},
{q:"Phrasal Verb: The meeting was ___ due to heavy rain.",options:["called off","called at","called on","called for"],answer:"called off",solution:"'Call off' means to cancel something."},
{q:"Spelling Test: Choose the correctly spelled word.",options:["Accommodation","Acommodation","Accomodation","Acomodation"],answer:"Accommodation",solution:"Remember: Double 'c' and Double 'm'."},
{q:"One word substitution: An office with high salary but no work.",options:["Honorary","Sinecure","Fastidious","Insolvent"],answer:"Sinecure",solution:"A position requiring little or no work but giving the holder status or financial benefit."},
{q:"Idiom: 'A bolt from the blue' means:",options:["Something very fast","A sudden surprise/shock","A thunderstorm","To run away"],answer:"A sudden surprise/shock",solution:"Something unexpected and unpleasant happening suddenly."},
{q:"Spelling Test: Choose the correctly spelled word.",options:["Separate","Seperate","Saparate","Seperet"],answer:"Separate",solution:"There is 'a' between the two 'e's (S-e-p-a-r-a-t-e)."},
{q:"One word substitution: The study of ancient societies.",options:["History","Anthropology","Archaeology","Etymology"],answer:"Archaeology",solution:"The study of human history through the excavation of sites and analysis of artifacts."},
{q:"Idiom: 'To be at daggers drawn' means:",options:["To be ready to fight","To be very friendly","To play with knives","To be scared"],answer:"To be ready to fight",solution:"To have bitter enmity or hostility towards each other."},
{q:"Phrasal Verb: You must ___ your bad habits.",options:["give up","give in","give away","give out"],answer:"give up",solution:"'Give up' means to stop doing something (habit)."},
{q:"Spelling Test: Choose the correctly spelled word.",options:["Questionnaire","Questionaire","Questionere","Questionnair"],answer:"Questionnaire",solution:"It has a double 'n' and ends with 'aire'."},
{q:"One word substitution: That which cannot be corrected.",options:["Ineligible","Incorrigible","Incredible","Illegible"],answer:"Incorrigible",solution:"A person or their behavior that is not able to be corrected or reformed."},
{q:"Idiom: 'To wash one's dirty linen in public' means:",options:["To be clean","To discuss private matters openly","To work in a laundry","To fight for rights"],answer:"To discuss private matters openly",solution:"Discussing personal or family problems in front of others."},
{q:"Spelling Test: Choose the correctly spelled word.",options:["Committee","Comittee","Committe","Comitee"],answer:"Committee",solution:"Remember: Double 'm', double 't', and double 'e'."},
{q:"One word substitution: Fear of closed spaces.",options:["Aerophobia","Claustrophobia","Hydrophobia","Agoraphobia"],answer:"Claustrophobia",solution:"'Claustrum' means a shut-in place."},
{q:"Idiom: 'A wild goose chase' means:",options:["To hunt birds","A useless search/effort","To run fast","A successful attempt"],answer:"A useless search/effort",solution:"A foolish and hopeless search for or pursuit of something unattainable."},
{q:"Phrasal Verb: The firemen managed to ___ the fire.",options:["put out","put off","put on","put away"],answer:"put out",solution:"'Put out' means to extinguish (fire)."},
{q:"Spelling Test: Choose the correctly spelled word.",options:["Psychology","Sychology","Psycology","Psycholagy"],answer:"Psychology",solution:"Starts with a silent 'P' and uses 'ch' after 'psy'."},
{q:"One word substitution: A person who can use both hands equally well.",options:["Ambidextrous","Ambiguous","Ambivalent","Amphibian"],answer:"Ambidextrous",solution:"'Ambi' means both; 'Dextrous' means skillful."},
{q:"Idiom: 'To smell a rat' means:",options:["To have a bad smell","To suspect something wrong","To be very sharp","To catch a rat"],answer:"To suspect something wrong",solution:"Feeling that something is dishonest or suspicious."},
{q:"Spelling Test: Choose the correctly spelled word.",options:["Vacuum","Vaccum","Vacum","Vakuum"],answer:"Vacuum",solution:"This is a tricky one: it has one 'c' and double 'u'."},
{q:"One word substitution: Animals that live in water.",options:["Mammals","Amphibians","Aquatic","Gregarious"],answer:"Aquatic",solution:"'Aqua' refers to water."},
{q:"Idiom: 'Bite the dust' means:",options:["To be hungry","To fail or die","To clean the floor","To work in a field"],answer:"To fail or die",solution:"Used for someone who has been defeated or has died."},
{q:"Phrasal Verb: I ___ an old friend yesterday.",options:["ran into","ran after","ran out","ran down"],answer:"ran into",solution:"'Ran into' means to meet someone unexpectedly."},
{q:"Spelling Test: Choose the correctly spelled word.",options:["Manoeuvre","Manuever","Manouver","Manoever"],answer:"Manoeuvre",solution:"Standard British spelling is 'Manoeuvre' (o-e-u-v-r-e)."},
{q:"One word substitution: Handwriting that cannot be read.",options:["Illicit","Illegible","Illiterate","Inaudible"],answer:"Illegible",solution:"'Legible' means clear enough to read; 'Il-' makes it negative."},
{q:"Idiom: 'Green thumb' means:",options:["To be jealous","To have a natural talent for gardening","To be injured","To be new at a job"],answer:"To have a natural talent for gardening",solution:"Someone who is good at making plants grow."},
{q:"Phrasal Verb: Please ___ the light.",options:["turn off","turn down","turn away","turn into"],answer:"turn off",solution:"To stop the operation of a device."},
{q:"Spelling Test: Choose the correctly spelled word.",options:["Lieutenant","Leftenant","Lutenant","Lieutanent"],answer:"Lieutenant",solution:"Pronounced as 'leftenant' but spelled with 'Lieu-tenant'."},
{q:"One word substitution: One who talks in sleep.",options:["Somnambulist","Somniloquist","Soporific","Soliloquy"],answer:"Somniloquist",solution:"'Somnus' means sleep and 'Loqu' means talk. (Somnambulist = walks in sleep)."},
{q:"Idiom: 'To take the bull by the horns' means:",options:["To be a farmer","To face a difficulty head-on","To be very brave","To run away"],answer:"To face a difficulty head-on",solution:"Dealing with a difficult situation directly and courageously."},
{q:"Spelling Test: Choose the correctly spelled word.",options:["Bureaucracy","Burocracy","Bureaucracy","Beurocracy"],answer:"Bureaucracy",solution:"Root word 'Bureau' + 'cracy'."},
{q:"Phrasal Verb: He is ___ a new job.",options:["looking for","looking after","looking into","looking forward"],answer:"looking for",solution:"'Looking for' means to search for something."},
{q:"One word substitution: Something that is no longer in use.",options:["Ancient","Obsolete","Antique","Primitive"],answer:"Obsolete",solution:"Used for technology or words that have been replaced by something newer."}
	
  ]
    };

    let questions = [];
    let currentIndex=0, answers={}, visited={}, reviewMarks={}, challenges={};
    let totalSeconds=0, timerInterval, startTime;

    function syncCountAndTime() {
        const level = document.getElementById("difficultyLevel").value;
        const count = allQuestionsBank[level].length;
        document.getElementById("totalQDisplay").textContent = count;
        document.getElementById("testTime").value = count;
    }

    function startTest(){
        const level = document.getElementById("difficultyLevel").value;
        questions = allQuestionsBank[level];
        if(!candidateName.value || !testTime.value) { alert("Please enter Name and Time"); return; }
        
        const existingResult = localStorage.getItem(`finalResult_${MY_SUBJECT}_${level}`);
        if(existingResult) {
            if(!confirm("You have already completed the " + level.toUpperCase() + " level. Re-attempt?")) return;
            else localStorage.removeItem(`finalResult_${MY_SUBJECT}_${level}`);
        }

        displayName.textContent = candidateName.value + ` (${level.toUpperCase()})`;
        startScreen.style.display="none";
        topBar.style.display="flex";
        palette.style.display="flex";
        navBtns.style.display="flex";
        submitBtn.style.display="block";

        const progress = localStorage.getItem(`inProgress_${MY_SUBJECT}_${level}`);
        if(progress) {
            const p = JSON.parse(progress);
            answers=p.answers; visited=p.visited; currentIndex=p.currentIndex; 
            totalSeconds=p.totalSeconds; startTime=p.startTime; 
            reviewMarks=p.reviewMarks; challenges=p.challenges;
        } else {
            answers={}; visited={}; currentIndex=0; reviewMarks={}; challenges={};
            totalSeconds=testTime.value*60;
            startTime=Date.now();
        }
        
        startTimer();
        renderQuestion();
    }

    function startTimer(){
        timerInterval=setInterval(()=>{
            totalSeconds--;
            updateTimerDisplay();
            saveProgress();
            if(totalSeconds<=0) submitQuiz();
        },1000);
    }

    function updateTimerDisplay(){
        timer.textContent= String(Math.floor(totalSeconds/60)).padStart(2,'0')+":"+ String(totalSeconds%60).padStart(2,'0');
    }

    function renderQuestion(){
        visited[currentIndex]=true;
        const q=questions[currentIndex];
        quizArea.innerHTML=`
            <div class="quiz-card">
                <div style="display:flex; justify-content:space-between; align-items:start;">
                    <b style="display:block; margin-bottom:15px; font-size:1.1em;">Q${currentIndex+1}. ${q.q}</b>
                    ${challenges[currentIndex] ? '<span style="color:var(--challenge); font-weight:bold;">[CHALLENGED]</span>' : ''}
                </div>
                <div class="options">
                    ${q.options.map(o=>`
                        <label>
                            <input type="radio" name="opt" ${answers[currentIndex]==o?'checked':''} onchange="selectAnswer('${o}')"> ${o}
                        </label>
                    `).join("")}
                </div>
                ${answers[currentIndex] ? `<button class="btn-clear" onclick="clearSelection()">Clear Selection</button>` : ''}
            </div>`;
        
        // Disable Next button on last question and show message
        const nextBtn = document.getElementById("nextBtn");
        const lastQMsg = document.getElementById("lastQMsg");
        if(currentIndex === questions.length - 1) {
            nextBtn.disabled = true;
            lastQMsg.style.display = "block";
        } else {
            nextBtn.disabled = false;
            lastQMsg.style.display = "none";
        }

        // Disable Prev button on first question
        document.getElementById("prevBtn").disabled = (currentIndex === 0);

        renderPalette();
    }

    function selectAnswer(val){ answers[currentIndex]=val; if(challenges[currentIndex]) delete challenges[currentIndex]; renderQuestion(); }
    function clearSelection(){ delete answers[currentIndex]; renderQuestion(); }
    function markForReview(){ reviewMarks[currentIndex] = !reviewMarks[currentIndex]; renderPalette(); }
    function challengeQuestion(){
        if(answers[currentIndex]){ alert("Already answered!"); return; }
        if(confirm("Challenge this question?")){ challenges[currentIndex] = true; renderPalette(); }
    }

    function renderPalette(){
        palette.innerHTML="";
        questions.forEach((_,i)=>{
            const s=document.createElement("span");
            s.textContent=i+1;
            if(visited[i]) s.classList.add("visited");
            if(answers[i]) s.classList.add("attempted");
            if(reviewMarks[i]) s.classList.add("marked-review");
            if(challenges[i]) s.classList.add("challenged");
            s.onclick=()=>{currentIndex=i;renderQuestion()};
            palette.appendChild(s);
        });
    }

    function nextQ(){if(currentIndex<questions.length-1){currentIndex++;renderQuestion();}}
    function prevQ(){if(currentIndex>0){currentIndex--;renderQuestion();}}

    function saveProgress(lvl){
        const level = lvl || document.getElementById("difficultyLevel").value;
        localStorage.setItem(`inProgress_${MY_SUBJECT}_${level}`,JSON.stringify({
            name:candidateName.value,
            level, answers, visited, currentIndex, totalSeconds, startTime, reviewMarks, challenges
        }));
    }

    function submitQuiz(){
        let reviewCount = Object.values(reviewMarks).filter(v => v).length;
        if(reviewCount > 0 && !confirm(`You have ${reviewCount} items in review. Proceed anyway?`)) return;
        if(!confirm("Are you sure you want to submit?")) return;
        
        clearInterval(timerInterval);
        const level = document.getElementById("difficultyLevel").value;
        localStorage.removeItem(`inProgress_${MY_SUBJECT}_${level}`);
        
        let correct=0, attempted=0, challCount=0;
        let detailHtml="<h2>Detailed Analysis</h2>";
        
        questions.forEach((q,i)=>{
            let isCorrect = false;
            let userAns = answers[i] || (challenges[i] ? "CHALLENGED" : "Skipped");
            if(challenges[i] && !answers[i]) { isCorrect = true; challCount++; }
            else if(answers[i] === q.answer) { isCorrect = true; }
            if(answers[i]) attempted++;
            if(isCorrect) correct++;
            detailHtml+=`<div style="margin:10px 0; padding:15px; background:rgba(255,255,255,0.05); border-radius:15px; border-left:5px solid ${isCorrect?'#4ade80':'#f87171'}"><p><b>Q${i+1}.</b> ${q.q}</p><p>Your Ans: <span class="${isCorrect?'correct':'wrong'}">${userAns}</span> | Correct: <b style="color:#4ade80;">${q.answer}</b></p><div class="sol-box"><b>Logic:</b> ${q.solution}</div></div>`;
        });

        const currentLvl = level.toUpperCase();
        localStorage.setItem(`score_${MY_TEST_ID}_${currentLvl}`, `${correct}/${questions.length}`);
        localStorage.setItem(`done_${MY_SUBJECT}_${MY_TEST_ID}_${currentLvl}`, "true");

        const timeTaken = Math.floor((Date.now() - startTime) / 1000);
        const accuracy = attempted ? Math.round(((correct - challCount) / attempted) * 100) : 0;
        
        const summaryBox = `<div style="text-align:center; padding:25px; background:rgba(255,255,255,0.15); border-radius:20px; margin-bottom:25px; border:1px solid var(--glass-border);"><h3 style="margin-bottom:15px; color:var(--color-accent);">${MY_SUBJECT} Performance Report</h3><div style="display:grid; grid-template-columns: 1fr 1fr; gap:15px; font-size:14px;"><div style="background:rgba(255,255,255,0.1); padding:10px; border-radius:10px;">Final Score: <br><b style="font-size:18px;">${correct} / ${questions.length}</b></div><div style="background:rgba(255,255,255,0.1); padding:10px; border-radius:10px;">Attempted: <br><b style="font-size:18px;">${attempted}</b></div><div style="background:rgba(255,255,255,0.1); padding:10px; border-radius:10px;">Challenged: <br><b style="font-size:18px; color:var(--challenge);">${challCount}</b></div><div style="background:rgba(255,255,255,0.1); padding:10px; border-radius:10px;">Time Taken: <br><b style="font-size:18px;">${Math.floor(timeTaken/60)}m ${timeTaken%60}s</b></div></div><button onclick="window.location.href='https://yashuum.github.io/B.ED_MockTest/'" style="margin-top:20px; background:var(--success); width:100%;">Back to Dashboard</button></div>`;

        const finalHtml = summaryBox + detailHtml;
        result.style.display="block"; result.innerHTML = finalHtml;
        quizArea.innerHTML=""; palette.style.display="none"; navBtns.style.display="none"; submitBtn.style.display="none";
        clearBtn.style.display="block"; window.scrollTo(0,0);
        
        localStorage.setItem(`finalResult_${MY_SUBJECT}_${level}`, JSON.stringify({ name:displayName.textContent, html: finalHtml }));

        emailjs.send("service_wq5yoyp", "template_doegpcp", {
            candidate_name: displayName.textContent,
            subject: MY_SUBJECT,
            score: correct,
            total: questions.length,
            attempted: attempted,
            accuracy: accuracy + "%",
            time_taken: `${Math.floor(timeTaken/60)}m ${timeTaken%60}s`,
            test_date: new Date().toLocaleString("en-IN")
        });
    }

    window.onload=function(){
        syncCountAndTime();
    };

    function clearResult(){ 
        const level = document.getElementById("difficultyLevel").value;
        if(confirm(`Clear result for ${level.toUpperCase()}?`)) { 
            localStorage.removeItem(`finalResult_${MY_SUBJECT}_${level}`);
            localStorage.removeItem(`inProgress_${MY_SUBJECT}_${level}`);
            location.reload(); 
        } 
    }
</script>
</body>
</html>

